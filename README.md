# Telegram-бот для уведомлений о Google Meet встречах

## Описание

Этот Telegram-бот отслеживает ваш Google Calendar и отправляет уведомления о предстоящих встречах в Google Meet. Бот предоставляет следующие функции:

- Уведомления о новых назначенных встречах
- Напоминания за 15 минут до начала встречи (повторяются каждые 5 минут)
- Просмотр всех онлайн-встреч на неделю
- Быстрый доступ к ссылкам для присоединения к встречам

## Установка

### Предварительные требования

- Python 3.7 или выше
- Google аккаунт с доступом к Google Calendar
- Telegram аккаунт

### Шаг 1: Клонирование репозитория


### Шаг 2: Установка зависимостей

```bash
pip install -r requirements.txt
```

### Шаг 3: Настройка Google Calendar API

1. Перейдите в [Google Cloud Console](https://console.cloud.google.com/)
2. Создайте новый проект
3. Включите Google Calendar API
4. Создайте учетные данные OAuth (тип "Desktop app")
5. Скачайте JSON-файл с учетными данными и сохраните его как `credentials.json` в корневой папке проекта

### Шаг 4: Создание Telegram бота

1. Откройте Telegram и найдите @BotFather
2. Отправьте команду `/newbot` и следуйте инструкциям
3. Получите токен бота и добавьте его в файл `.env`:

```
BOT_TOKEN=ваш_токен_бота
USER_ID=
CHECK_INTERVAL=300 #(300 секунд = 5 минут)
```

## Использование

### Запуск бота

```bash
python bot.py
```

При первом запуске откроется браузер для авторизации в Google. После авторизации токен будет сохранен в файле `token.json`.

### Команды бота

- `/start` - Начало работы с ботом и сохранение вашего Telegram ID
- `/week` - Просмотр всех онлайн-встреч на неделю
- `/check` - Принудительная проверка новых встреч
- `/reset` - Сброс кэша обработанных встреч (бот будет считать все текущие встречи новыми)
- `/debug` - Отображение отладочной информации

## Функциональность

### Уведомления о новых встречах

Бот автоматически отправляет уведомление, когда в вашем календаре появляется новая встреча с ссылкой на Google Meet.

### Напоминания о предстоящих встречах

За 15 минут до начала встречи бот отправляет напоминание с ссылкой для присоединения. Напоминания повторяются каждые 5 минут до начала встречи.

### Просмотр расписания

Команда `/week` показывает все предстоящие онлайн-встречи на неделю, сгруппированные по дням.

## Настройка

### Изменение интервала проверки

По умолчанию бот проверяет календарь каждые 10 секунд (для тестирования). Для продакшена рекомендуется изменить это значение на 300 секунд (5 минут) в файле `.env`:



### Настройка USER_ID

После первого запуска бота используйте команду `/start`, чтобы получить ваш Telegram ID. Затем добавьте этот ID в файл `.env`:

```
BOT_TOKEN=ваш_токен_бота
USER_ID=ваш_telegram_id
```

## Структура проекта

- `bot.py` - Основной файл бота с логикой Telegram-интеграции
- `google_calendar.py` - Модуль для работы с Google Calendar API
- `.env` - Файл с переменными окружения (токен бота и ID пользователя)
- `requirements.txt` - Зависимости проекта
- `credentials.json` - Учетные данные Google API (создается вами)
- `token.json` - Токен доступа к Google API (создается автоматически)
- `processed_events.json` - Кэш обработанных встреч (создается автоматически)

## Устранение неполадок

### Проблемы с авторизацией Google

Если возникают проблемы с авторизацией, удалите файл `token.json` и перезапустите бота.

### Отсутствие уведомлений

Используйте команду `/debug` для проверки настроек и `/reset` для сброса кэша обработанных встреч.

### Часовые пояса

Бот использует UTC для работы с датами. Если возникают проблемы с часовыми поясами, проверьте настройки вашего Google Calendar.

## Дополнительные возможности

- Бот фильтрует встречи и показывает только те, которые содержат ссылки на Google Meet
- Команда `/week` группирует встречи по дням для удобного просмотра
- Уведомления содержат информацию о времени до начала встречи
